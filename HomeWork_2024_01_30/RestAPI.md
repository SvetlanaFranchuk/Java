[Постановка задачи](#Постановка-задачи)

* [Общие положения](#Общие-положения)
* [Типы данных](#Типы-данных)
    * [User](#User)
    * [Role](#Role)
    * [Exhibition](#Exhibition)
    * [ArtWork](#ArtWork)
    * [Comment](#Comment)
    * [ArtList](#ArtList)
    * [Author](#Author)
    * [GenreArt](#GenreArt)
    * [TypeArt](#TypeArt)
    * [DirectionArt](#DirectionArt)
    * [PreferencesList](#PreferencesList)
    * [Comment](#Comment)
    * [Basket](#Basket)
    * [Purchases](#Purchases)
    * [Ticket](#Ticket)
    * [Status](#Status)
    * [StatusExhibition](#StatusExhibition)
    * [Error](#Error)

* [Методы](#Методы)
    * [POST /user](#post-user) 
    * [POST /user/{email}](#post-userEmail)
    * [PUT /user/{password}](#put-userpassword)
    * [DELETE /user/{id}](#delete-userid)
    * [POST /user/{preferences}](#post-userPreferences)
    * [PUT /user/{preferences}](#put-userPreferences)
    * [POST /exhibition/{ticket}](#post-exhibitionticket)
    * [GET /exhibition](#get-exhibition)
    * [GET /exhibition/{artList}](#get-exhibitionArtList)
    * [GET /exhibition/{artList}/{artWork}](#get-exhibitionArtListArtWork)
    * [GET /exhibition/{author}](#get-exhibitionAuthor)
    * [GET /exhibition/{period}](#get-exhibitionPeriod)
    * [GET /exhibition/{GenreArt}](#get-exhibitionGenreArt)
    * [GET /exhibition/{TypeArt}](#get-exhibitionTypeArt)
    * [GET /exhibition/{DirectionArt}](#get-exhibitionDirectionArt)
    * [POST /Comment](#post-comment)
    * [DELETE /Comment](#delete-comment)
    * [PUT /Comment](#put-comment)
    * [GET /Basket](#get-basket)
    * [GET /Basket/{Ticket}](#get-ticket)
    * [POST /Basket/{Ticket}](#post-basketTicket)
    * [PUT /Basket/{Ticket}](#put-basketTicket)
    * [DELETE /Basket/{Ticket}](#delete-basketTicket)
    * [GET /Purchases](#get-basket)
    * [GET /Purchases/{Ticket}](#get-ticket)
    
* [Список ошибок](#Список-ошибок)

## Постановка задачи (Пользовательский функционал приложения онлайн-музея)

Сервлет должен выполнять:
*на этом этапе всё, что написано ниже я уже описала и
не захотела удалять. Поняла, что сервлетов по задуманной части будет несколько,
а в д/з нужно было описать только один :(((*

1. управление работой пользователя (регистрация, авторизация, смена пароля, удаление аккаунта)
2. управление предпочтениями пользователя (установка, изменение)
3. работа с выставками:
- вывести перечень существующих выставок (если для пользователя не оплачен доступ к выставке, то
просто наименование, дату старта или признак "архив", вывести перечень выставок по автору, 
виду, жанру, направлению 
- если доступ оплачен - то, плюсом к перечисленному выше, если выставка идет или уже проходила, 
доступен просмотр перечня списка экспонатов выставки, просмотр самих экспонатов, полной 
информации по экспонатам (автор, история создания, техника, и прочие интересные факты), 
плюс дополнительно информация по авторам, чьи работы были на выставках.
- вывод расписания мероприятий на заданный период
4. управление комментариями (создание, изменение, удаление)
5. управление корзиной (бронь билетов, формирование билета с уникальным ИД после покупки,
отмена брони, просмотр информации в корзине)
6. управление разделом Мои покупки (просмотр истории покупок)

## Общие положения

Схема работы приложения (сторона пользователя)  https://dbdiagram.io/d/65bce3daac844320ae4fca80

Передача параметров в методы `GET` осуществляется с использованием типа данных `application/json` в кодировке UTF-8.

Результаты выполнения запросов передаются с использованием типа данных `application/json` в кодировке UTF-8.

Ошибки возвращаются с использованием типа данных [Error](#error) и семантически соответствующим http-кодам.

## Типы данных

### User

Сущность, содержащая информацию о пользователе (посетителе/администраторе).

| Поле             | Тип данных | Обязательное | Комментарий                        |
|------------------|------------|--------------|------------------------------------|
| id               | long       | да           | Уникальный идентификатор владельца |
| firstName        | String     | да           | Имя пользователя                   |
| lastName         | String     | да           | Фамилия пользователя               |
| email            | String     | да           | Email пользователя                 |
| password         | String     | да           | Пароль пользователя                |
| isActive         | boolean    | да           | Признак активности пользователя    |
| dateRegistration | String     | да           | Дата регистрации пользователя      |
| idRole           | String     | да           | Роль пользователя                  |

### Role

Сущность, содержащая информацию о ролях пользователя.

| Поле | Тип данных | Обязательное | Комментарий                   |
|------|------------|--------------|-------------------------------|
| id   | long       | да           | Уникальный идентификатор роли |
| name | String     | да           | Имя роли                      |

### Exhibition

Сущность, содержащая информацию о выставке.

| Поле        | Тип данных | Обязательное | Комментарий                          |
|-------------|------------|--------------|--------------------------------------|
| id          | long       | да           | Уникальный идентификатор выставки    |
| name        | String     | да           | Наименование выставки (латиница)     |
| description | String     | да           | Краткое описание выставки (латиница) |
| dateStart   | long       | да           | Дата начала выставки                 |
| dateEnd     | long       | да           | Дата окончания выставки              |
| idArtList   | long       | да           | Список экспонатов                    |

### ArtWork

Сущность, содержащая информацию об экспонате.

| Поле           | Тип данных | Обязательное | Комментарий                        |
|----------------|------------|--------------|------------------------------------|
| id             | long       | да           | Уникальный идентификатор экспоната |
| name           | String     | да           | Наименование экспоната (латиница)  |
| idAuthor       | long       | да           | ИД автора экспоната                |
| yearCreate     | int        | нет          | Год создания экспоната             |
| idGerneArt     | long       | да           | ИД жанра произведения              |
| idTypeArt      | long       | да           | ИД типа произведения               |
| idDirectionArt | long       | да           | ИД направления в искусстве         |
| description    | String     | да           | Краткое описание (латиница)        |

### Comment

Сущность, содержащая информацию о комментариях пользователей, относящихся к экспонату/выставке/приложению

| Поле         | Тип данных    | Обязательное | Комментарий                          |
|--------------|---------------|--------------|--------------------------------------|
| id           | long          | да           | Уникальный идентификатор комментария |
| text         | String        | да           | Текст комментария                    |
| dateComment  | LocalDateTime | да           | Дата комментария                     |
| idUser       | long          | да           | ИД пользователя                      |
| idExhibition | long          | да           | ИД выставки                          |
| idArtWork    | long          | да           | ИД экспоната                         |

### ArtList

Сущность, содержащая информацию с листом экспонатов для выставки.

| Поле        | Тип данных | Обязательное | Комментарий                    |
|-------------|------------|--------------|--------------------------------|
| id          | long       | да           | Уникальный идентификатор листа |
| idArtWork   | long       | да           | ИД экспоната                   |
| description | String     | да           | Краткое описание листа         |

### GenreArt

Сущность, содержащая перечень жанров искусства.

| Поле | Тип данных | Обязательное | Комментарий                    |
|------|------------|--------------|--------------------------------|
| id   | long       | да           | Уникальный идентификатор жанра |
| name | String     | да           | Наименование жанра             |

### TypeArt

Сущность, содержащая перечень видов искусства

| Поле | Тип данных | Обязательное | Комментарий                   |
|------|------------|--------------|-------------------------------|
| id   | long       | да           | Уникальный идентификатор вида |
| name | String     | да           | Наименование вида             |

### DirectionArt

Сущность, содержащая перечень направлений в искусстве

| Поле | Тип данных | Обязательное | Комментарий                           |
|------|------------|--------------|---------------------------------------|
| id   | long       | да           | Уникальный идентификатор направлениея |
| name | String     | да           | Наименование направления              |

### Author

Сущность, содержащая перечень авторов

| Поле      | Тип данных | Обязательное | Комментарий                     |
|-----------|------------|--------------|---------------------------------|
| id        | long       | да           | Уникальный идентификатор автора |
| firstName | String     | да           | Имя автора                      |
| lastName  | String     | да           | Фамилия автора                  |

### PreferencesList

Сущность, содержащая запись предпочтений пользователя.

| Поле           | Тип данных | Обязательное | Комментарий                                 |
|----------------|------------|--------------|---------------------------------------------|
| id             | long       | да           | Уникальный идентификатор листа предпочтений |
| idUser         | long       | да           | Идентификатор пользователя                  |
| idGerneArt     | long       | да           | ИД жанра                                    |
| idTypeArt      | long       | да           | ИД вида                                     |
| idDirectionArt | long       | да           | ИД направления                              |

### Basket

Сущность, содержащая запись о корзине пользователя

| Поле          | Тип данных | Обязательное | Комментарий                       |
|---------------|------------|--------------|-----------------------------------|
| id            | long       | да           | Уникальный идентификатор корзины  |
| idUser        | long       | да           | Идентификатор пользователя        |
| idTicket      | long       | да           | Идентификатор билета              |

### Purchases

Сущность, содержащая запись об истории приобретенных билетов

| Поле          | Тип данных | Обязательное | Комментарий                                 |
|---------------|------------|--------------|---------------------------------------------|
| id            | long       | да           | Уникальный идентификатор раздела purchases  |
| idUser        | long       | да           | Идентификатор пользователя                  |
| idTicket      | long       | да           | Идентификатор билета                        |

### Ticket

Сущность, содержащая запись о билете на посещение выставки

| Поле          | Тип данных | Обязательное | Комментарий                     |
|---------------|------------|--------------|---------------------------------|
| id            | UUID       | да           | Уникальный идентификатор билета |
| idUser        | long       | да           | Идентификатор пользователя      |
| idExhibition  | long       | да           | Идентификатор выставки          |
| dataTimeVisit | LocalDate  | да           | Дата посещения                  |
| price         | double     | да           | Цена билета                     |
| idStatus      | long       | да           | Статус билета                   |

### Status

Сущность, содержащая перечень возможных статусов билета

| Поле | Тип данных | Обязательное | Комментарий                      |
|------|------------|--------------|----------------------------------|
| id   | long       | да           | Уникальный идентификатор статуса |
| name | String     | да           | Наименование                     |

### StatusExhibition

Сущность, содержащая перечень возможных статусов выставки

| Поле | Тип данных | Обязательное | Комментарий                      |
|------|------------|--------------|----------------------------------|
| id   | long       | да           | Уникальный идентификатор статуса |
| name | String     | да           | Наименование                     |

### Error

Сущность, содержащая информацию об ошибке.

| Поле    | Тип данных | Обязательное | Комментарий |
|---------|------------|--------------|-------------|
| code    | String     | да           | Код ошибки. |
| message | String     | нет          | Сообщение.  |

## Методы

### POST /user

Создание пользователя

#### Ответ

[User](#User)

Возвращает ид созданного пользователя.

#### Ошибки

| Код | Комментарий         |
|-----|---------------------|
| 1   | Сервис недоступен.  |

### POST /user/{email}

Авторизация пользователя по Email

#### Ошибки

| Код | Комментарий             |
|-----|-------------------------|
| 2   | Отсутствие авторизации  |

### PUT /user/{password}

Изменение пароля

#### Ответ

[User](#User)

Возвращает ид пользователя.

### DELETE /user/{id}

Удаление аккаунта пользователя. Перевод состояния isActive в false

### POST /user/{preferences}

Установка предпочтений пользователя

#### Ответ

[PreferencesList](#PreferencesList)

Возвращает список предпочтений пользователя.

### PUT /user/{preferences}

Изменение списка предпочтений пользователя 

#### Ответ

[PreferencesList](#PreferencesList)

Возвращает список предпочтений пользователя.

### POST /exhibition/{ticket}

Получение доступа к выставке по идентификатору билета

#### Ответ

[Exhibition](#Exhibition)

Возвращает доступную выставку.

#### Ошибки

| Код | Комментарий            |
|-----|------------------------|
| 2   | Отсутствие авторизации |
| 3   | Объект не найден       |

### GET /exhibition

Получение списка всех выставок

#### Ответ

[Exhibition](#Exhibition)

Возвращает список всех выставок.

### GET /exhibition/{artList}

Получение списка экспонатов выставки

#### Ответ

[ArtList](#ArtList)

Возвращает список экспонатов выставки.

### GET /exhibition/{artList}/{artWork}

Получение информации об экспонате выставки

#### Ответ

[ArtWork](#ArtWork)

Возвращает информацию об экспонате выставки.

### GET /exhibition/{author}

Получение списка выставок запрашиваемого автора

#### Ответ

[Exhibition](#Exhibition)

Возвращает информацию о выставках автора

### GET /exhibition/{period}

Получение списка выставок начало которых запланировано на запрашиваемый месяц, год

#### Ответ

[Exhibition](#Exhibition)

Возвращает информацию о расписании выставок на будущий период

### GET /exhibition/{GenreArt}

Получение списка выставок запрашиваемого жанра

#### Ответ

[Exhibition](#Exhibition)

Возвращает информацию о выставках 

### GET /exhibition/{TypeArt}

Получение списка выставок запрашиваемого вида искусства

#### Ответ

[Exhibition](#Exhibition)

Возвращает информацию о выставках

### GET /exhibition/{DirectionArt}

Получение списка выставок запрашиваемого направления искусства

#### Ответ

[Exhibition](#Exhibition)

Возвращает информацию о выставках

### POST /Comment

Добавить комментарий

#### Ответ

[Comment](#Comment)

Добавляет комментарий

### DELETE /Comment

Удалить комментарий

### PUT /Comment

Изменить комментарий

#### Ответ

[Comment](#Comment)

Изменяет комментарий

### GET /Basket

Показать состояние корзины

#### Ответ

[Basket](#Basket)

Возвращает список билетов в корзине пользователя

### GET /Basket/{Ticket}

Показать состояние билета

#### Ответ

[Ticket](#Ticket)

Возвращает состояние билета в корзине

### POST /Basket/{Ticket}

Поместить билет в корзину

#### Ответ

[Basket](#Basket)

Возвращает состояние корзины

### PUT /Basket/{Ticket}

Изменить статус билета в корзине

#### Ответ

[Basket](#Basket)

Возвращает состояние корзины

### DELETE /Basket/{Ticket}

Удалить билет из корзины

#### Ответ

[Basket](#Basket)

Возвращает состояние корзины

### GET /Purchases

Показать состояние раздела Purchases (история покупок)

#### Ответ

[Purchases](#Purchases)

Возвращает список билетов в разделе Purchases (Мои покупки)

### GET /Purchases/{Ticket}

Показать информацию билета

#### Ответ

[Ticket](#Ticket)

Возвращает информацию по билету в разделе Мои покупки

## Список ошибок

| Код | Комментарий                       | HTTP-код                |
|-----|-----------------------------------|-------------------------|
| 1   | Сервис недоступен.                | 503 Service Unavailable |
| 2   | Ошибка авторизации                | 401 Unauthorized        |
| 3   | Объект не найден.                 | 404 Not Found           |
